# Swagger UI用のNginx設定
# この内容を /etc/nginx/sites-available/winyx の適切な位置に追加してください

      # Swagger UI
      location /swagger/ {
          alias /var/www/winyx/backend/swagger/;
          try_files $uri $uri/ /swagger/index.html;
          
          # 本番環境では以下のアクセス制限を有効化することを推奨
          # allow 192.168.0.0/16;
          # allow 127.0.0.1;
          # deny all;
          
          # Basic認証を追加する場合
          # auth_basic "API Documentation";
          # auth_basic_user_file /etc/nginx/.htpasswd;
      }

      # OpenAPI仕様ファイル
      location /api/docs/ {
          alias /var/www/winyx/contracts/openapi/;
          try_files $uri $uri/ =404;
          
          # CORS設定
          add_header Access-Control-Allow-Origin * always;
          add_header Access-Control-Allow-Methods "GET, OPTIONS" always;
          add_header Access-Control-Allow-Headers "Authorization, Content-Type" always;
          
          # JSONファイル用のContent-Type
          location ~ \.json$ {
              add_header Content-Type application/json always;
          }
          
          # YAMLファイル用のContent-Type
          location ~ \.(yaml|yml)$ {
              add_header Content-Type application/x-yaml always;
          }
      }

# 適用方法:
# 1. この設定を /etc/nginx/sites-available/winyx の server {} ブロック内に追加
# 2. sudo nginx -t でシンタックスチェック
# 3. sudo systemctl reload nginx で設定を反映