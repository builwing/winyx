# ç¬¬8ç«  ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™º

> æœ¬ç« ã§ã¯ã€Go-Zeroå¥‘ç´„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸­å¿ƒã¨ã—ãŸçµ±åˆé–‹ç™ºç’°å¢ƒã«ã‚ˆã‚Šã€Flutterã€React Nativeãªã©ã®ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚

---

## ç¬¬1ç¯€ ãƒ¢ãƒã‚¤ãƒ«å‘ã‘çµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 8.1.1 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

Winyxãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€**ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹å¯¾å¿œã®å¥‘ç´„ãƒ•ã‚¡ã‚¤ãƒ«**ï¼ˆuser_serviceã€task_serviceã€message_serviceï¼‰ã‹ã‚‰Webã€ãƒ¢ãƒã‚¤ãƒ«ã™ã¹ã¦ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã€ä¸€è²«æ€§ã®ã‚ã‚‹é–‹ç™ºä½“é¨“ã‚’æä¾›ã—ã¾ã™ã€‚

#### å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚        Go-Zero å¥‘ç´„ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤       â”‚
                    â”‚   user.api / task.api / message.api â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                        â”‚                        â”‚
           â–¼                        â–¼                        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ TypeScript  â”‚        â”‚    Dart     â”‚        â”‚   Swift     â”‚
    â”‚  (Next.js)  â”‚        â”‚ (Flutter)   â”‚        â”‚   (iOS)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                        â”‚                        â”‚
           â–¼                        â–¼                        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Web Client  â”‚        â”‚Mobile Clientâ”‚        â”‚ iOS Client  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                        â”‚                        â”‚
           â”‚ é–‹ç™ºæ™‚: HTTP/REST      â”‚ HTTP/REST             â”‚ HTTP/REST
           â”‚ æœ¬ç•ªæ™‚: API Routes     â”‚                        â”‚
           â”‚         â†“ RPC          â”‚                        â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚       Go-Zero ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ç¾¤     â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
                    â”‚  â”‚UserService  â”‚ â”‚TaskService  â”‚â”‚
                    â”‚  â”‚ (Port 8888) â”‚ â”‚ (Port 8889) â”‚â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
                    â”‚  â”‚MessageSvc   â”‚ â”‚ RPC Servicesâ”‚â”‚
                    â”‚  â”‚ (Port 8890) â”‚ â”‚ (å†…éƒ¨é€šä¿¡)   â”‚â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.1.2 ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆ¥é€šä¿¡æ–¹å¼

| ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ | é–‹ç™ºç’°å¢ƒ | æœ¬ç•ªç’°å¢ƒ | ç‰¹å¾´ |
|------------|----------|----------|------|
| **Next.js Web** | HTTP â†’ Microservices | API Routes â†’ RPC | SSRå¯¾å¿œã€é«˜é€Ÿå†…éƒ¨é€šä¿¡ |
| **Flutter Mobile** | HTTP â†’ Microservices | HTTP â†’ Gateway | ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  |
| **React Native** | HTTP â†’ Microservices | HTTP â†’ Gateway | ãƒã‚¤ãƒ†ã‚£ãƒ–æ€§èƒ½ |
| **iOS/Android** | HTTP â†’ Microservices | HTTP â†’ Gateway | å®Œå…¨ãƒã‚¤ãƒ†ã‚£ãƒ– |

### 8.1.3 çµ±åˆé–‹ç™ºã®ãƒ¡ãƒªãƒƒãƒˆ

- **çµ±ä¸€ã•ã‚ŒãŸå‹å®šç¾©**: å˜ä¸€ã®å¥‘ç´„ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã™ã¹ã¦ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å‘ã‘å‹ã‚’ç”Ÿæˆ
- **ä»•æ§˜ã®ä¸€è²«æ€§**: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨ã™ã¹ã¦ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé–“ã§ã®ä»•æ§˜é½Ÿé½¬ã‚’é˜²æ­¢
- **é–‹ç™ºåŠ¹ç‡ã®å‘ä¸Š**: ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ¯ã®æ‰‹å‹•ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒä¸è¦
- **ä¿å®ˆæ€§ã®å‘ä¸Š**: å¥‘ç´„å¤‰æ›´æ™‚ã®è‡ªå‹•åŒæœŸã«ã‚ˆã‚Šä¿®æ­£æ¼ã‚Œã‚’é˜²æ­¢

---

## ç¬¬2ç¯€ Flutteré–‹ç™ºç’°å¢ƒã®æ§‹ç¯‰

### 8.2.1 Flutterç”¨ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ„ãƒ¼ãƒ«

æ—¢ã«å®Ÿè£…æ¸ˆã¿ã®Flutterç”¨ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ„ãƒ¼ãƒ«ã«ã¤ã„ã¦è©³ã—ãèª¬æ˜ã—ã¾ã™ã€‚

- [ ] Flutterç”¨ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ„ãƒ¼ãƒ«ã®ç¢ºèª
```bash
vim /var/www/winyx/scripts/generate_flutter_code.js
```

ã“ã®ãƒ„ãƒ¼ãƒ«ã®ä¸»ãªæ©Ÿèƒ½ï¼š
- ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åˆ¥Go-Zeroå¥‘ç´„ãƒ•ã‚¡ã‚¤ãƒ«ã®è§£æ
- Dartã‚¯ãƒ©ã‚¹å®šç¾©ã®è‡ªå‹•ç”Ÿæˆï¼ˆuser/task/messageåˆ¥ï¼‰
- ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹å¯¾å¿œAPIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®è‡ªå‹•ç”Ÿæˆ
- ã‚µãƒ¼ãƒ“ã‚¹é–“é€šä¿¡ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã®å®Ÿè£…

### 8.2.2 ç”Ÿæˆã•ã‚Œã‚‹Dartã‚¯ãƒ©ã‚¹

Go-Zeroå¥‘ç´„ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä»¥ä¸‹ã®ã‚ˆã†ãªDartã‚¯ãƒ©ã‚¹ãŒç”Ÿæˆã•ã‚Œã¾ã™ï¼š

```dart
class LoginReq {
  /// ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
  final String email;
  
  /// ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
  final String password;

  const LoginReq({
    required this.email,
    required this.password,
  });

  factory LoginReq.fromJson(Map<String, dynamic> json) {
    return LoginReq(
      email: json['email'],
      password: json['password'],
    );
  }

  Map<String, dynamic> toJson() {
    return {
      'email': email,
      'password': password,
    };
  }

  @override
  String toString() {
    return 'LoginReq{email: $email, password: $password}';
  }

  @override
  bool operator ==(Object other) {
    if (identical(this, other)) return true;
    return other is LoginReq &&
        other.email == email &&
        other.password == password;
  }

  @override
  int get hashCode {
    return Object.hash(email, password);
  }
}
```

### 8.2.3 ç”Ÿæˆã•ã‚Œã‚‹APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

```dart
class WinyxApiClient {
  final String baseUrl;
  final Map<String, String> _defaultHeaders;
  final Duration timeout;
  String? _authToken;

  WinyxApiClient({
    required this.baseUrl,
    Map<String, String>? headers,
    this.timeout = const Duration(seconds: 30),
  }) : _defaultHeaders = {
    'Content-Type': 'application/json',
    'Accept': 'application/json',
    ...?headers,
  };

  /// èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®š
  void setAuthToken(String token) {
    _authToken = token;
  }

  /// ãƒ­ã‚°ã‚¤ãƒ³API
  Future<LoginRes> login(LoginReq request) async {
    return _post<LoginRes>(
      '/api/auth/login',
      request.toJson(),
      LoginRes.fromJson,
    );
  }

  // ãã®ä»–ã®APIãƒ¡ã‚½ãƒƒãƒ‰ã‚‚è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹...
}
```

### 8.2.4 Flutterä¾å­˜é–¢ä¿‚ã®è¨­å®š

ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã«å¿…è¦ãªä¾å­˜é–¢ä¿‚ï¼š

```yaml
# pubspec.yaml
dependencies:
  flutter:
    sdk: flutter
  http: ^1.1.0
  json_annotation: ^4.8.1

dev_dependencies:
  json_serializable: ^6.7.1
  build_runner: ^2.4.7
  flutter_lints: ^3.0.1
```

---

## ç¬¬3ç¯€ Flutterå®Ÿè£…ä¾‹

### 8.3.1 èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ã®å®Ÿè£…

- [ ] AuthServiceã®ä½œæˆ
```dart
// lib/services/auth_service.dart
import '../generated/api_client.dart';
import '../generated/models.dart';
import 'package:shared_preferences/shared_preferences.dart';

class AuthService {
  final WinyxApiClient _apiClient;
  static const String _tokenKey = 'auth_token';
  
  AuthService() : _apiClient = WinyxApiClient(
    baseUrl: _getBaseUrl(),
  );

  static String _getBaseUrl() {
    // ç’°å¢ƒã«å¿œã˜ã¦ãƒ™ãƒ¼ã‚¹URLã‚’åˆ‡ã‚Šæ›¿ãˆ
    const bool isProduction = bool.fromEnvironment('dart.vm.product');
    if (isProduction) {
      return 'https://winyx.jp';
    } else {
      return 'http://10.0.2.2:8888'; // Android Emulatorç”¨ï¼ˆAPIã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ï¼‰
      // return 'http://localhost:8888'; // iOS Simulatorç”¨ï¼ˆAPIã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ï¼‰
    }
  }
  
  static Map<String, String> getMicroserviceUrls() {
    const bool isProduction = bool.fromEnvironment('dart.vm.product');
    if (isProduction) {
      return {
        'user': 'https://winyx.jp/api/user',
        'task': 'https://winyx.jp/api/task',
        'message': 'https://winyx.jp/api/message',
      };
    } else {
      return {
        'user': 'http://10.0.2.2:8888',
        'task': 'http://10.0.2.2:8889', 
        'message': 'http://10.0.2.2:8890',
      };
    }
  }

  /// ãƒ­ã‚°ã‚¤ãƒ³
  Future<LoginRes> login(String email, String password) async {
    final request = LoginReq(
      email: email,
      password: password,
    );
    
    try {
      final response = await _apiClient.login(request);
      
      // èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä¿å­˜
      await _saveToken(response.accessToken);
      _apiClient.setAuthToken(response.accessToken);
      
      return response;
    } catch (e) {
      throw AuthException('ãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸ: ${e.toString()}');
    }
  }

  /// è‡ªå‹•ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ï¼‰
  Future<bool> tryAutoLogin() async {
    final token = await _getStoredToken();
    if (token == null) return false;

    try {
      _apiClient.setAuthToken(token);
      // ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ‰åŠ¹æ€§ã‚’ãƒã‚§ãƒƒã‚¯
      await _apiClient.userInfo();
      return true;
    } catch (e) {
      // ãƒˆãƒ¼ã‚¯ãƒ³ãŒç„¡åŠ¹ãªå ´åˆã¯å‰Šé™¤
      await _clearToken();
      return false;
    }
  }

  /// ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
  Future<void> logout() async {
    try {
      await _apiClient.logout();
    } finally {
      await _clearToken();
      _apiClient.clearAuthToken();
    }
  }

  // ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¡ã‚½ãƒƒãƒ‰
  Future<void> _saveToken(String token) async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.setString(_tokenKey, token);
  }

  Future<String?> _getStoredToken() async {
    final prefs = await SharedPreferences.getInstance();
    return prefs.getString(_tokenKey);
  }

  Future<void> _clearToken() async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.remove(_tokenKey);
  }
}

class AuthException implements Exception {
  final String message;
  const AuthException(this.message);
  
  @override
  String toString() => message;
}
```

### 8.3.2 çŠ¶æ…‹ç®¡ç†ï¼ˆProviderä½¿ç”¨ï¼‰

- [ ] èªè¨¼çŠ¶æ…‹ã®ç®¡ç†
```dart
// lib/providers/auth_provider.dart
import 'package:flutter/material.dart';
import '../services/auth_service.dart';
import '../generated/models.dart';

class AuthProvider with ChangeNotifier {
  final AuthService _authService = AuthService();
  
  LoginRes? _user;
  bool _isLoading = false;
  bool _isAuthenticated = false;

  LoginRes? get user => _user;
  bool get isLoading => _isLoading;
  bool get isAuthenticated => _isAuthenticated;

  AuthProvider() {
    _tryAutoLogin();
  }

  Future<void> _tryAutoLogin() async {
    _isLoading = true;
    notifyListeners();

    try {
      final success = await _authService.tryAutoLogin();
      if (success) {
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—
        await _loadUserInfo();
      }
    } catch (e) {
      debugPrint('Auto login failed: $e');
    }

    _isLoading = false;
    notifyListeners();
  }

  Future<bool> login(String email, String password) async {
    _isLoading = true;
    notifyListeners();

    try {
      final response = await _authService.login(email, password);
      _user = response;
      _isAuthenticated = true;
      _isLoading = false;
      notifyListeners();
      return true;
    } catch (e) {
      _isLoading = false;
      notifyListeners();
      throw e;
    }
  }

  Future<void> logout() async {
    try {
      await _authService.logout();
    } finally {
      _user = null;
      _isAuthenticated = false;
      notifyListeners();
    }
  }

  Future<void> _loadUserInfo() async {
    try {
      // ã“ã“ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ã™ã‚‹APIã‚’å‘¼ã³å‡ºã—
      // final userInfo = await _authService.getUserInfo();
      // _user = userInfo;
      _isAuthenticated = true;
    } catch (e) {
      debugPrint('Failed to load user info: $e');
      await logout();
    }
  }
}
```

### 8.3.3 ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã®å®Ÿè£…

- [ ] LoginScreenã®ä½œæˆ
```dart
// lib/screens/login_screen.dart
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import '../providers/auth_provider.dart';

class LoginScreen extends StatefulWidget {
  @override
  _LoginScreenState createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _formKey = GlobalKey<FormState>();
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  bool _obscurePassword = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  Future<void> _handleLogin() async {
    if (!_formKey.currentState!.validate()) return;

    final authProvider = Provider.of<AuthProvider>(context, listen: false);
    
    try {
      final success = await authProvider.login(
        _emailController.text.trim(),
        _passwordController.text,
      );

      if (success && mounted) {
        Navigator.of(context).pushReplacementNamed('/dashboard');
      }
    } catch (e) {
      if (mounted) {
        ScaffoldMessenger.of(context).showSnackBar(
          SnackBar(
            content: Text(e.toString()),
            backgroundColor: Colors.red,
          ),
        );
      }
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: SafeArea(
        child: Padding(
          padding: const EdgeInsets.all(24.0),
          child: Center(
            child: SingleChildScrollView(
              child: Form(
                key: _formKey,
                child: Column(
                  mainAxisAlignment: MainAxisAlignment.center,
                  crossAxisAlignment: CrossAxisAlignment.stretch,
                  children: [
                    // ãƒ­ã‚´
                    Icon(
                      Icons.account_circle,
                      size: 80,
                      color: Theme.of(context).primaryColor,
                    ),
                    const SizedBox(height: 32),

                    // ã‚¿ã‚¤ãƒˆãƒ«
                    Text(
                      'Winyxã«ãƒ­ã‚°ã‚¤ãƒ³',
                      style: Theme.of(context).textTheme.headlineMedium,
                      textAlign: TextAlign.center,
                    ),
                    const SizedBox(height: 32),

                    // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›
                    TextFormField(
                      controller: _emailController,
                      keyboardType: TextInputType.emailAddress,
                      decoration: const InputDecoration(
                        labelText: 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹',
                        prefixIcon: Icon(Icons.email),
                        border: OutlineInputBorder(),
                      ),
                      validator: (value) {
                        if (value == null || value.isEmpty) {
                          return 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„';
                        }
                        if (!RegExp(r'^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$')
                            .hasMatch(value)) {
                          return 'æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„';
                        }
                        return null;
                      },
                    ),
                    const SizedBox(height: 16),

                    // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›
                    TextFormField(
                      controller: _passwordController,
                      obscureText: _obscurePassword,
                      decoration: InputDecoration(
                        labelText: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰',
                        prefixIcon: const Icon(Icons.lock),
                        suffixIcon: IconButton(
                          icon: Icon(
                            _obscurePassword
                                ? Icons.visibility
                                : Icons.visibility_off,
                          ),
                          onPressed: () {
                            setState(() {
                              _obscurePassword = !_obscurePassword;
                            });
                          },
                        ),
                        border: const OutlineInputBorder(),
                      ),
                      validator: (value) {
                        if (value == null || value.isEmpty) {
                          return 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„';
                        }
                        if (value.length < 6) {
                          return 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯6æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„';
                        }
                        return null;
                      },
                    ),
                    const SizedBox(height: 24),

                    // ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³
                    Consumer<AuthProvider>(
                      builder: (context, authProvider, child) {
                        return ElevatedButton(
                          onPressed: authProvider.isLoading 
                              ? null 
                              : _handleLogin,
                          style: ElevatedButton.styleFrom(
                            padding: const EdgeInsets.symmetric(vertical: 16),
                            shape: RoundedRectangleBorder(
                              borderRadius: BorderRadius.circular(8),
                            ),
                          ),
                          child: authProvider.isLoading
                              ? const SizedBox(
                                  height: 20,
                                  width: 20,
                                  child: CircularProgressIndicator(
                                    strokeWidth: 2,
                                  ),
                                )
                              : const Text(
                                  'ãƒ­ã‚°ã‚¤ãƒ³',
                                  style: TextStyle(fontSize: 16),
                                ),
                        );
                      },
                    ),

                    const SizedBox(height: 16),

                    // æ–°è¦ç™»éŒ²ãƒªãƒ³ã‚¯
                    TextButton(
                      onPressed: () {
                        Navigator.of(context).pushNamed('/register');
                      },
                      child: const Text('ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆ'),
                    ),
                  ],
                ),
              ),
            ),
          ),
        ),
      ),
    );
  }
}
```

---

## ç¬¬4ç¯€ React Nativeå¯¾å¿œ

### 8.4.1 React Nativeç”¨ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ

React Nativeã§ã‚‚åŒæ§˜ã®å¥‘ç´„ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰TypeScriptç”¨APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ç”Ÿæˆã§ãã¾ã™ã€‚

- [ ] React Nativeç”¨ç”Ÿæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè£…
```javascript
// scripts/generate_react_native_code.js ã®ä¸€éƒ¨
function generateReactNativeApiClient(endpoints, types) {
  let output = `import AsyncStorage from '@react-native-async-storage/async-storage';

class WinyxApiClient {
  private config: ApiConfig;
  private authToken?: string;

  constructor(config: ApiConfig) {
    this.config = {
      timeout: 30000,
      headers: {
        'Content-Type': 'application/json',
        'Accept': 'application/json',
      },
      ...config,
    };
  }

  async setAuthToken(token: string): Promise<void> {
    this.authToken = token;
    await AsyncStorage.setItem('auth_token', token);
  }

  private async request<T>(
    method: string,
    endpoint: string,
    data?: any
  ): Promise<T> {
    const url = \`\${this.config.baseURL}\${endpoint}\`;
    const headers = await this.getHeaders();

    const response = await fetch(url, {
      method,
      headers,
      body: data ? JSON.stringify(data) : undefined,
    });

    if (!response.ok) {
      throw new ApiException(\`Request failed: \${response.statusText}\`);
    }

    return response.json();
  }
`;

  // ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆåˆ¥ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”Ÿæˆ
  endpoints.forEach(endpoint => {
    // ãƒ¡ã‚½ãƒƒãƒ‰ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯...
  });

  return output;
}
```

### 8.4.2 React Nativeå®Ÿè£…ä¾‹

- [ ] React Nativeç”¨èªè¨¼ãƒ•ãƒƒã‚¯
```typescript
// src/hooks/useAuth.ts
import { useState, useEffect } from 'react';
import AsyncStorage from '@react-native-async-storage/async-storage';
import { WinyxApiClient } from '../generated/api-client';
import { LoginReq, LoginRes } from '../generated/types';

const apiClient = new WinyxApiClient({
  baseURL: __DEV__ ? 'http://localhost:8888' : 'https://winyx.jp',
  // ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹å¯¾å¿œ
  userServiceURL: __DEV__ ? 'http://localhost:8888' : 'https://winyx.jp/api/user',
  taskServiceURL: __DEV__ ? 'http://localhost:8889' : 'https://winyx.jp/api/task',
  messageServiceURL: __DEV__ ? 'http://localhost:8890' : 'https://winyx.jp/api/message',
});

export const useAuth = () => {
  const [user, setUser] = useState<LoginRes | null>(null);
  const [isLoading, setIsLoading] = useState(true);
  const [isAuthenticated, setIsAuthenticated] = useState(false);

  useEffect(() => {
    checkAuthStatus();
  }, []);

  const checkAuthStatus = async () => {
    try {
      const token = await AsyncStorage.getItem('auth_token');
      if (token) {
        apiClient.setAuthToken(token);
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ã—ã¦ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ‰åŠ¹æ€§ç¢ºèª
        const userInfo = await apiClient.getUserInfo();
        setUser(userInfo);
        setIsAuthenticated(true);
      }
    } catch (error) {
      // ãƒˆãƒ¼ã‚¯ãƒ³ãŒç„¡åŠ¹ãªå ´åˆ
      await AsyncStorage.removeItem('auth_token');
    } finally {
      setIsLoading(false);
    }
  };

  const login = async (email: string, password: string) => {
    setIsLoading(true);
    try {
      const request: LoginReq = { email, password };
      const response = await apiClient.login(request);
      
      await apiClient.setAuthToken(response.accessToken);
      setUser(response);
      setIsAuthenticated(true);
      
      return true;
    } catch (error) {
      throw error;
    } finally {
      setIsLoading(false);
    }
  };

  const logout = async () => {
    try {
      await apiClient.logout();
    } finally {
      await AsyncStorage.removeItem('auth_token');
      apiClient.clearAuthToken();
      setUser(null);
      setIsAuthenticated(false);
    }
  };

  return {
    user,
    isLoading,
    isAuthenticated,
    login,
    logout,
  };
};
```

---

## ç¬¬5ç¯€ ãƒ¢ãƒã‚¤ãƒ«å‘ã‘REST APIã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤è¨­è¨ˆ

### 8.5.1 ãƒ¢ãƒã‚¤ãƒ«å°‚ç”¨è¨­å®š

ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã¯å¤–éƒ¨ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã®ãŸã‚ã€å†…éƒ¨RPCã§ã¯ãªãã€REST APIï¼ˆ8888ï¼‰ã‚’çµŒç”±ã—ã¦ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã«æ¥ç¶šã—ã¾ã™ã€‚

- [ ] ãƒ¢ãƒã‚¤ãƒ«ç”¨è¨­å®šã®å¼·åŒ–
```go
// backend/user_service/internal/config/config.go
type Config struct {
    rest.RestConf
    
    // CORSè¨­å®š
    Cors CorsConfig
    
    // ãƒ¢ãƒã‚¤ãƒ«ç”¨è¨­å®š
    Mobile MobileConfig
}

type CorsConfig struct {
    Enable          bool     `json:",default=true"`
    AllowOrigins    []string `json:",default=['*']"`
    AllowMethods    []string `json:",default=['GET','POST','PUT','DELETE','OPTIONS']"`
    AllowHeaders    []string `json:",default=['Content-Type','Authorization','X-Requested-With','X-App-Version','X-Device-ID','X-Platform']"`
    AllowCredentials bool    `json:",default=true"`
    MaxAge          int      `json:",default=3600"`
}

type MobileConfig struct {
    RateLimit       RateLimit
    DeviceTracking  bool   `json:",default=true"`
    VersionCheck    bool   `json:",default=true"`
    MinAppVersion   string `json:",default=1.0.0"`
}
```

### 8.5.2 ãƒ¢ãƒã‚¤ãƒ«å°‚ç”¨ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢

- [ ] ãƒ‡ãƒã‚¤ã‚¹æ¤œå‡ºã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯
```go
// backend/user_service/internal/middleware/mobile.go
func (m *MobileMiddleware) Handle(next http.HandlerFunc) http.HandlerFunc {
    return func(w http.ResponseWriter, r *http.Request) {
        // ãƒ¢ãƒã‚¤ãƒ«ãƒ‡ãƒã‚¤ã‚¹æ¤œå‡º
        userAgent := r.UserAgent()
        isMobile := m.isMobileDevice(userAgent)
        
        // ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯
        appVersion := r.Header.Get("X-App-Version")
        if isMobile && appVersion != "" {
            if !m.isValidVersion(appVersion) {
                httpx.Error(w, &UpdateRequiredError{
                    Message: "ã‚¢ãƒ—ãƒªã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒå¿…è¦ã§ã™",
                    MinVersion: "1.0.0",
                    UpdateUrl: "https://apps.apple.com/app/winyx",
                })
                return
            }
        }
        
        // ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±ã®ãƒ­ã‚°è¨˜éŒ²
        if isMobile {
            deviceID := r.Header.Get("X-Device-ID")
            platform := r.Header.Get("X-Platform")
            
            logx.WithContext(r.Context()).Infof(
                "Mobile request: device=%s, platform=%s, version=%s",
                deviceID, platform, appVersion,
            )
        }
        
        // CORS ãƒ˜ãƒƒãƒ€ãƒ¼ã®è¨­å®š
        m.setCorsHeaders(w, r)
        
        next(w, r)
    }
}
```

### 8.5.3 ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- [ ] ãƒ¢ãƒã‚¤ãƒ«å‘ã‘ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–
```go
// ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªå‘ã‘ãƒ¬ãƒ¼ãƒˆåˆ¶é™
func (m *MobileMiddleware) applyRateLimit(r *http.Request) error {
    deviceID := r.Header.Get("X-Device-ID")
    if deviceID == "" {
        return errors.New("Device ID required for mobile clients")
    }
    
    // ãƒ‡ãƒã‚¤ã‚¹æ¯ã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒã‚§ãƒƒã‚¯
    key := fmt.Sprintf("rate_limit:mobile:%s", deviceID)
    
    // Redisãƒ™ãƒ¼ã‚¹ã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™å®Ÿè£…
    // ... ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒ­ã‚¸ãƒƒã‚¯
    
    return nil
}
```

---

## ç¬¬6ç¯€ é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®çµ±åˆ

### 8.6.1 ãƒãƒ«ãƒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé–‹ç™ºãƒ•ãƒ­ãƒ¼

- [ ] çµ±åˆé–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
```bash
# 1. å¥‘ç´„ãƒ•ã‚¡ã‚¤ãƒ«ã®ç·¨é›†ï¼ˆãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹å¯¾å¿œï¼‰
vim /var/www/winyx/contracts/user_service/user.api
vim /var/www/winyx/contracts/task_service/task.api
vim /var/www/winyx/contracts/message_service/message.api

# 2. å…¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå‘ã‘ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
./scripts/sync_contracts.sh
# â†’ TypeScript (Next.js)
# â†’ Dart (Flutter)  
# â†’ TypeScript (React Native)
# â†’ OpenAPIä»•æ§˜æ›¸

# 3. å„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã®é–‹ç™º
## Webé–‹ç™º
cd frontend && npm run dev

## Flutteré–‹ç™º  
cd mobile/flutter_app && flutter run

## React Nativeé–‹ç™º
cd mobile/react_native_app && npx react-native run-android
```

### 8.6.2 é–‹ç™ºç’°å¢ƒã®èµ·å‹•

- [ ] é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®ä¸€æ‹¬èµ·å‹•
```bash
# ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ä¸€æ‹¬èµ·å‹•
#!/bin/bash
# start_dev.sh

echo "ğŸš€ Winyxé–‹ç™ºç’°å¢ƒã‚’èµ·å‹•ä¸­..."

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ï¼ˆãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆï¼‰
cd backend/user_service
go run user_service.go -f etc/user_service-api.yaml &
USER_SERVICE_PID=$!

cd ../task_service
go run task_service.go -f etc/task_service-api.yaml &
TASK_SERVICE_PID=$!

cd ../message_service
go run message_service.go -f etc/message_service-api.yaml &
MESSAGE_SERVICE_PID=$!

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•  
cd ../../frontend
npm run dev &
FRONTEND_PID=$!

# Flutter (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
if [ "$1" = "flutter" ]; then
    cd ../mobile/flutter_app
    flutter run &
    FLUTTER_PID=$!
fi

echo "âœ… é–‹ç™ºç’°å¢ƒãŒèµ·å‹•ã—ã¾ã—ãŸ"
echo "ğŸŒ Web: http://localhost:3000"
echo "ğŸ”§ API: http://localhost:8888"

# Ctrl+C ã§å…¨ã¦åœæ­¢
trap 'kill $USER_SERVICE_PID $TASK_SERVICE_PID $MESSAGE_SERVICE_PID $FRONTEND_PID $FLUTTER_PID' EXIT
wait
```

### 8.6.3 ãƒ†ã‚¹ãƒˆç’°å¢ƒ

- [ ] çµ±åˆãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```bash
#!/bin/bash
# test_all.sh

echo "ğŸ§ª å…¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œä¸­..."

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆï¼ˆå…¨ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ï¼‰
cd backend/user_service && go test ./...
cd ../task_service && go test ./...
cd ../message_service && go test ./...

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
cd ../../frontend  
npm test

# Flutterãƒ†ã‚¹ãƒˆ
cd ../mobile/flutter_app
flutter test

# React Nativeãƒ†ã‚¹ãƒˆ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
if [ -d "../react_native_app" ]; then
    cd ../react_native_app
    npm test
fi

echo "âœ… å…¨ãƒ†ã‚¹ãƒˆãŒå®Œäº†ã—ã¾ã—ãŸ"
```

---

## ç¬¬7ç¯€ ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°

### 8.7.1 Flutterå˜ä½“ãƒ†ã‚¹ãƒˆ

- [ ] APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ
```dart
// test/api_client_test.dart
import 'package:flutter_test/flutter_test.dart';
import 'package:http/http.dart' as http;
import 'package:mockito/mockito.dart';
import '../lib/generated/api_client.dart';
import '../lib/generated/models.dart';

class MockHttpClient extends Mock implements http.Client {}

void main() {
  group('WinyxApiClient Tests', () {
    late WinyxApiClient apiClient;
    late MockHttpClient mockHttpClient;

    setUp(() {
      mockHttpClient = MockHttpClient();
      apiClient = WinyxApiClient(
        baseUrl: 'https://test.winyx.jp',
      );
    });

    test('ãƒ­ã‚°ã‚¤ãƒ³ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨', () async {
      // ãƒ¢ãƒƒã‚¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¨­å®š
      when(mockHttpClient.post(
        any,
        headers: anyNamed('headers'),
        body: anyNamed('body'),
      )).thenAnswer((_) async => http.Response(
        '''
        {
          "access_token": "test_token_123",
          "expire_time": 1640995200,
          "user_id": 1,
          "name": "ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼"
        }
        ''',
        200,
      ));

      // ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
      final request = LoginReq(
        email: 'test@example.com',
        password: 'password123',
      );

      final response = await apiClient.login(request);

      // æ¤œè¨¼
      expect(response.accessToken, equals('test_token_123'));
      expect(response.expireTime, equals(1640995200));
    });

    test('èªè¨¼ã‚¨ãƒ©ãƒ¼ãŒé©åˆ‡ã«å‡¦ç†ã•ã‚Œã‚‹ã“ã¨', () async {
      // ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¨­å®š
      when(mockHttpClient.post(any, 
          headers: anyNamed('headers'),
          body: anyNamed('body')))
          .thenAnswer((_) async => http.Response(
        '''
        {
          "error": "invalid_credentials",
          "message": "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“"
        }
        ''',
        401,
      ));

      // ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã¨ã‚¨ãƒ©ãƒ¼æ¤œè¨¼
      final request = LoginReq(
        email: 'invalid@example.com',
        password: 'wrong_password',
      );

      expect(
        () => apiClient.login(request),
        throwsA(isA<ApiException>()),
      );
    });
  });
}
```

### 8.7.2 çµ±åˆãƒ†ã‚¹ãƒˆ

- [ ] Flutterçµ±åˆãƒ†ã‚¹ãƒˆ
```dart
// integration_test/app_test.dart
import 'package:flutter/material.dart';
import 'package:flutter_test/flutter_test.dart';
import 'package:integration_test/integration_test.dart';
import 'package:winyx_app/main.dart' as app;

void main() {
  IntegrationTestWidgetsFlutterBinding.ensureInitialized();

  group('ã‚¢ãƒ—ãƒªçµ±åˆãƒ†ã‚¹ãƒˆ', () {
    testWidgets('ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ãƒ­ãƒ¼ã®ãƒ†ã‚¹ãƒˆ', (WidgetTester tester) async {
      // ã‚¢ãƒ—ãƒªèµ·å‹•
      app.main();
      await tester.pumpAndSettle();

      // ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã®ç¢ºèª
      expect(find.text('Winyxã«ãƒ­ã‚°ã‚¤ãƒ³'), findsOneWidget);
      expect(find.byType(TextFormField), findsNWidgets(2));

      // ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±å…¥åŠ›
      await tester.enterText(
        find.byType(TextFormField).first,
        'test@example.com',
      );
      await tester.enterText(
        find.byType(TextFormField).last,
        'password123',
      );

      // ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—
      await tester.tap(find.text('ãƒ­ã‚°ã‚¤ãƒ³'));
      await tester.pumpAndSettle();

      // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç”»é¢ã¸ã®é·ç§»ã‚’ç¢ºèª
      expect(find.text('ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰'), findsOneWidget);
    });
  });
}
```

### 8.7.3 ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«

- [ ] Flutterç”¨ãƒ‡ãƒãƒƒã‚°è¨­å®š
```dart
// lib/utils/debug_tools.dart
class DebugTools {
  static bool get isDebugMode {
    bool debugMode = false;
    assert(debugMode = true);
    return debugMode;
  }

  static void logApiRequest(String method, String url, Map<String, dynamic>? data) {
    if (isDebugMode) {
      print('ğŸŒ API Request: $method $url');
      if (data != null) {
        print('ğŸ“¦ Data: $data');
      }
    }
  }

  static void logApiResponse(String url, int statusCode, dynamic response) {
    if (isDebugMode) {
      print('âœ… API Response: $url - Status: $statusCode');
      print('ğŸ“¦ Response: $response');
    }
  }

  static void logError(String message, dynamic error, StackTrace? stackTrace) {
    if (isDebugMode) {
      print('âŒ Error: $message');
      print('ğŸ› Details: $error');
      if (stackTrace != null) {
        print('ğŸ“ Stack: $stackTrace');
      }
    }
  }
}
```

---

## ã¾ã¨ã‚

æœ¬ç« ã§æ§‹ç¯‰ã—ãŸãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºç’°å¢ƒã«ã‚ˆã‚Šï¼š

1. **çµ±ä¸€ã•ã‚ŒãŸé–‹ç™ºä½“é¨“** - å˜ä¸€ã®å¥‘ç´„ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã™ã¹ã¦ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ
2. **å‹å®‰å…¨ãªé–‹ç™º** - ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã§ã®å‹ãƒã‚§ãƒƒã‚¯ã«ã‚ˆã‚‹å“è³ªå‘ä¸Š
3. **è‡ªå‹•åŒ–ã•ã‚ŒãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼** - å¥‘ç´„å¤‰æ›´æ™‚ã®è‡ªå‹•ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
4. **ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ** - Flutterã€React Nativeã€ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªã™ã¹ã¦ã«å¯¾å¿œ
5. **çµ±åˆãƒ†ã‚¹ãƒˆç’°å¢ƒ** - å˜ä½“ãƒ†ã‚¹ãƒˆã‹ã‚‰çµ±åˆãƒ†ã‚¹ãƒˆã¾ã§ã®å®Œå…¨ãªãƒ†ã‚¹ãƒˆç’°å¢ƒ
6. **åŠ¹ç‡çš„ãªãƒ‡ãƒãƒƒã‚°** - é–‹ç™ºåŠ¹ç‡ã‚’å‘ä¸Šã•ã›ã‚‹ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«

**Contract-Driven Mobile Development with Microservices**ã«ã‚ˆã‚Šã€Webã€ãƒ¢ãƒã‚¤ãƒ«ã™ã¹ã¦ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆã«å¯¾å¿œã—ãŸä¸€è²«ã—ãŸå“è³ªã§é–‹ç™ºã§ãã‚‹ç’°å¢ƒãŒæ•´ã„ã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒãƒ¼ãƒ å…¨ä½“ã§ã®é–‹ç™ºåŠ¹ç‡ã¨å“è³ªã®å¤§å¹…ãªå‘ä¸ŠãŒå®Ÿç¾ã•ã‚Œã¾ã™ã€‚