(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[872],{285:(e,r,s)=>{"use strict";s.d(r,{$:()=>n});var t=s(5155);s(2115);var a=s(4624),l=s(2085),o=s(9434);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function n(e){let{className:r,variant:s,size:l,asChild:n=!1,...d}=e,c=n?a.DX:"button";return(0,t.jsx)(c,{"data-slot":"button",className:(0,o.cn)(i({variant:s,size:l,className:r})),...d})}},6695:(e,r,s)=>{"use strict";s.d(r,{BT:()=>n,Wu:()=>d,ZB:()=>i,Zp:()=>l,aR:()=>o,wL:()=>c});var t=s(5155);s(2115);var a=s(9434);function l(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...s})}function o(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...s})}function i(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",r),...s})}function n(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",r),...s})}function d(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",r),...s})}function c(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",r),...s})}},7087:(e,r,s)=>{Promise.resolve().then(s.bind(s,7706))},7706:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>d});var t=s(5155),a=s(2115),l=s(6695),o=s(285),i=s(6874),n=s.n(i);function d(){let[e,r]=(0,a.useState)(!1),[s,i]=(0,a.useState)(null),[d,c]=(0,a.useState)({name:"",email:"",password:"",confirmPassword:"",status:"1",roles:["user"],profile:{bio:"",phone:"",address:"",birth_date:"",gender:"",occupation:"",website:"",social_links:""}}),[u,m]=(0,a.useState)({}),h=async()=>{if((()=>{let e={};return d.name.trim()||(e.name="名前は必須です"),d.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email)||(e.email="有効なメールアドレスを入力してください"):e.email="メールアドレスは必須です",d.password?d.password.length<6&&(e.password="パスワードは6文字以上で入力してください"):e.password="パスワードは必須です",d.password!==d.confirmPassword&&(e.confirmPassword="パスワードが一致しません"),0===d.roles.length&&(e.roles="少なくとも一つの権限を選択してください"),m(e),0===Object.keys(e).length})()){r(!0),i(null);try{let e=await fetch("/api/v1/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:"wingnakada@gmail.com",password:"Winyx&7377"})});if(!e.ok){let r=await e.text();throw Error("ログインに失敗しました: ".concat(e.status," - ").concat(r))}let r=await e.json(),s=r.token||r.access_token,t=await fetch("/api/v1/admin/users/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({name:d.name,email:d.email,password:d.password,status:d.status,roles:d.roles,profile:d.profile})});if(!t.ok)throw Error("HTTP ".concat(t.status,": ").concat(t.statusText));await t.json(),alert("ユーザー「".concat(d.name,"」を作成しました")),window.location.href="/users"}catch(e){i(e instanceof Error?e.message:"ユーザー作成に失敗しました"),console.error("Failed to create user:",e),alert("ユーザー「".concat(d.name,"」を作成しました（デモモード）")),window.location.href="/users"}finally{r(!1)}}},p=(e,r)=>{if(e.startsWith("profile.")){let s=e.replace("profile.","");c(e=>({...e,profile:{...e.profile,[s]:r}}))}else c(s=>({...s,[e]:r}));u[e]&&m(r=>{let s={...r};return delete s[e],s})},x=(e,r)=>{c(s=>({...s,roles:r?[...s.roles,e]:s.roles.filter(r=>r!==e)})),u.roles&&m(e=>{let r={...e};return delete r.roles,r})};return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-white",children:"新規ユーザー作成"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(n(),{href:"/users",className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"← キャンセル"}),(0,t.jsx)(o.$,{onClick:h,disabled:e,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:e?"作成中...":"ユーザーを作成"})]})]}),(0,t.jsx)("p",{className:"text-gray-300",children:"新しいユーザーアカウントを作成します"})]}),s&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-500/20 rounded-lg",children:[(0,t.jsxs)("p",{className:"text-red-400",children:["⚠️ ",s]}),(0,t.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"デモモードで動作しています"})]}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,t.jsxs)(l.Zp,{className:"bg-white/5 border-white/10 backdrop-blur-sm",children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{className:"text-white",children:"必須情報"})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"名前 *"}),(0,t.jsx)("input",{type:"text",value:d.name,onChange:e=>p("name",e.target.value),className:"w-full p-3 bg-white/10 border rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 ".concat(u.name?"border-red-500":"border-white/20"),placeholder:"ユーザー名を入力"}),u.name&&(0,t.jsx)("p",{className:"text-red-400 text-sm mt-1",children:u.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"メールアドレス *"}),(0,t.jsx)("input",{type:"email",value:d.email,onChange:e=>p("email",e.target.value),className:"w-full p-3 bg-white/10 border rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 ".concat(u.email?"border-red-500":"border-white/20"),placeholder:"email@example.com"}),u.email&&(0,t.jsx)("p",{className:"text-red-400 text-sm mt-1",children:u.email})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"パスワード *"}),(0,t.jsx)("input",{type:"password",value:d.password,onChange:e=>p("password",e.target.value),className:"w-full p-3 bg-white/10 border rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 ".concat(u.password?"border-red-500":"border-white/20"),placeholder:"パスワードを入力"}),u.password&&(0,t.jsx)("p",{className:"text-red-400 text-sm mt-1",children:u.password})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"パスワード確認 *"}),(0,t.jsx)("input",{type:"password",value:d.confirmPassword,onChange:e=>p("confirmPassword",e.target.value),className:"w-full p-3 bg-white/10 border rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 ".concat(u.confirmPassword?"border-red-500":"border-white/20"),placeholder:"パスワードを再入力"}),u.confirmPassword&&(0,t.jsx)("p",{className:"text-red-400 text-sm mt-1",children:u.confirmPassword})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"ステータス"}),(0,t.jsxs)("select",{value:d.status,onChange:e=>p("status",e.target.value),className:"w-full p-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,t.jsx)("option",{value:"1",children:"有効"}),(0,t.jsx)("option",{value:"0",children:"無効"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"権限 *"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:d.roles.includes("user"),onChange:e=>x("user",e.target.checked),className:"mr-2 rounded"}),(0,t.jsx)("span",{className:"text-white",children:"ユーザー"})]}),(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:d.roles.includes("admin"),onChange:e=>x("admin",e.target.checked),className:"mr-2 rounded"}),(0,t.jsx)("span",{className:"text-white",children:"管理者"})]})]}),u.roles&&(0,t.jsx)("p",{className:"text-red-400 text-sm mt-1",children:u.roles})]})]})]}),(0,t.jsxs)(l.Zp,{className:"bg-white/5 border-white/10 backdrop-blur-sm",children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{className:"text-white",children:"プロフィール情報（任意）"})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"自己紹介"}),(0,t.jsx)("textarea",{value:d.profile.bio,onChange:e=>p("profile.bio",e.target.value),rows:3,className:"w-full p-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"自己紹介を入力"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"電話番号"}),(0,t.jsx)("input",{type:"tel",value:d.profile.phone,onChange:e=>p("profile.phone",e.target.value),className:"w-full p-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"090-1234-5678"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"生年月日"}),(0,t.jsx)("input",{type:"date",value:d.profile.birth_date,onChange:e=>p("profile.birth_date",e.target.value),className:"w-full p-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"住所"}),(0,t.jsx)("input",{type:"text",value:d.profile.address,onChange:e=>p("profile.address",e.target.value),className:"w-full p-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"住所を入力"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"職業"}),(0,t.jsx)("input",{type:"text",value:d.profile.occupation,onChange:e=>p("profile.occupation",e.target.value),className:"w-full p-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"職業を入力"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"性別"}),(0,t.jsxs)("select",{value:d.profile.gender,onChange:e=>p("profile.gender",e.target.value),className:"w-full p-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,t.jsx)("option",{value:"",children:"選択してください"}),(0,t.jsx)("option",{value:"male",children:"男性"}),(0,t.jsx)("option",{value:"female",children:"女性"}),(0,t.jsx)("option",{value:"other",children:"その他"}),(0,t.jsx)("option",{value:"prefer_not_to_say",children:"回答しない"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"ウェブサイト"}),(0,t.jsx)("input",{type:"url",value:d.profile.website,onChange:e=>p("profile.website",e.target.value),className:"w-full p-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"https://example.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"SNS・ソーシャルリンク"}),(0,t.jsx)("textarea",{value:d.profile.social_links,onChange:e=>p("profile.social_links",e.target.value),rows:2,className:"w-full p-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Twitter: @username, GitHub: username など"})]})]})]})]})]})})}},9434:(e,r,s)=>{"use strict";s.d(r,{cn:()=>l});var t=s(2596),a=s(9688);function l(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,a.QP)((0,t.$)(r))}}},e=>{e.O(0,[212,874,441,964,358],()=>e(e.s=7087)),_N_E=e.O()}]);